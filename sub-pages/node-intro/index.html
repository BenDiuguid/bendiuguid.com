<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>BDiuguid | node-intro</title>

  <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
  <meta name="author" content="Ben Diuguid">

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link type="image/x-icon" rel="icon" href="favicon.ico">
  <link type="image/x-icon" rel="shortcut icon" href="favicon.ico">

  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/default.css" id="theme">

  <!-- For syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- If the query includes 'print-pdf', include the PDF print sheet -->
  <script>
    if (window.location.search.match(/print-pdf/gi)) {
    	var link = document.createElement('link');
    	link.rel = 'stylesheet';
    	link.type = 'text/css';
    	link.href = 'css/print/pdf.css';
    	document.getElementsByTagName('head')[0].appendChild(link);
    }
  </script>

  <!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->

    <!--

    <section>
      <h2>Fragment Styles</h2>
      <p>There's a few styles of fragments, like:</p>
      <p class="fragment grow">grow</p>
      <p class="fragment shrink">shrink</p>
      <p class="fragment roll-in">roll-in</p>
      <p class="fragment fade-out">fade-out</p>
      <p class="fragment highlight-red">highlight-red</p>
      <p class="fragment highlight-green">highlight-green</p>
      <p class="fragment highlight-blue">highlight-blue</p>
      <p class="fragment current-visible">current-visible</p>
      <p class="fragment highlight-current-blue">highlight-current-blue</p>
    </section>

    <section>
      <h2>Intergalactic Interconnections</h2>
      <p>
        You can link between slides internally,
        <a href="#/2/3">like this</a>.
      </p>
    </section>

    <a class="image" href="http://lab.hakim.se/meny/" target="_blank">
      <img width="320" height="299" src="http://s3.amazonaws.com/hakim-static/portfolio/images/meny.png" alt="Meny">
    </a>

    <h2>Pretty Code</h2>
    <pre><code data-trim contenteditable>
function linkify( selector ) {
if( supports3DTransforms ) {

var nodes = document.querySelectorAll( selector );

for( var i = 0, len = nodes.length; i &lt; len; i++ ) {
  var node = nodes[i];

  if( !node.className ) {
    node.className += ' roll';
  }
}
}
}
      </code></pre>


    <a href="?transition=cube#/transitions">Cube</a> -
    <a href="?transition=page#/transitions">Page</a> -
    <a href="?transition=concave#/transitions">Concave</a> -
    <a href="?transition=zoom#/transitions">Zoom</a> -
    <a href="?transition=linear#/transitions">Linear</a> -
    <a href="?transition=fade#/transitions">Fade</a> -
    <a href="?transition=none#/transitions">None</a> -
    <a href="?#/transitions">Default</a>

    <section data-background="#007777">
    <section data-background="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png">
    <section data-transition="linear" data-background="#4d7e65" data-background-transition="slide">
    <section data-background="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" data-background-repeat="repeat" data-background-size="100px">

    <section data-state="customevent">
      <h2>Custom Events</h2>
      <p>
        Additionally custom events can be triggered on a per slide basis by binding to the <code>data-state</code> name.
      </p>
      <pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;">
Reveal.addEventListener( 'customevent', function() {
console.log( '"customevent" has fired' );
} );
        </code></pre>
    </section>

    -->
</head>

<body>

  <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

      <section>
        <h1>node.js</h1>
        <p>
          <small>Presented by Ben Diuguid | <a href="http://twitter.com/bdiuguid" target="_blank">@BDiuguid</a></small>
        </p>
      </section>

      <section>
        <h1>Agenda</h1>
        <ul>
          <li>Why node.js?</li>
          <li>JavaScript Background</li>
          <li>Node Basics</li>
          <li>Express</li>
          <li>Realtime Apps with Socket.io</li>
          <!-- <li>Browserify</li> -->
          <li>Further Reading</li>
        </ul>
      </section>

      <section>
        <section>
          <h1>why might I want to use node?</h1>
        </section>
        <section>
          <h2>JavaScript Everywhere</h2>
          <ul>
            <li>npm</li>
            <li>Code reuse</li>
            <li>Cross Platform</li>
            <li>Same programming style/language for client and server</li>
          </ul>
        </section>
        <section>
          <h2>Vibrant Community</h2>
          <ul>
            <li>~100,000 packages on npm</li>
            <li>Huge wealth of JS code</li>
            <li>Programs like Atom.io written in Node</li>
          </ul>
        </section>
        <section>
          <h2>Makes coding easier</h2>
          <ul>
            <li><a href="http://gruntjs.com" target="_blank">Grunt</a></li>
            <li><a href="http://bower.io" target="_blank">Bower</a></li>
            <li><a href="http://yeoman.io" target="_blank">Yeoman</a></li>
            <li><a href="http://ngrok.com" target="_blank">ngrok</a></li>
            <li>Executables</li>
          </ul>
        </section>
      </section>

      <section>
        <section>
          <h1>Javascript polyfill</h1>
        </section>
        <section>
          <h2>Closures</h2>
        </section>
        <section>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
function init () {
    var numbers = [ 1, 2, 4, 8, 16, 32 ];

    return {
        addEntry: function () {
            numbers.push( 2^numbers.length );
        },
        get: function (n) {
            if( n < numbers.length ) {
                return numbers[n];
            }
        }
    };
}

var powersOfTwo = init();

console.log( powersOfTwo.get(5) ); // 32

powersOfTwo.addEntry();
console.log( powersOfTwo.get(6) ); // 64
          </code></pre>
        </section>
        <section>
          <h2>Callbacks</h2>
        </section>
        <section>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
function callback () {
    console.log("done");
}

function doStuffAsync (func) {
    // doing something like ajax call to load some file.
    func();
}

doStuffAsync(callback);
// logs "done" after its done loading file. (might take a few seconds)
          </code></pre>
        </section>
        <section>
          <h2>Promises</h2>
        </section>
        <section>
          <p>The ugly callback way.</p>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
getUser("Domenic", function (err, user) {
    if (err) {
        ui.error(err);
    } else {
        getBestFriend(user, function (err, friend) {
            if (err) {
                ui.error(err);
            } else {
                ui.showBestFriend(friend);
            }
        });
    }
});
          </code></pre>
        </section>
        <section>
          <p>The Promise Way.</p>
          <p>Each promise returns a promise. Every promise has a then method.</p>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
then(fulfilledHandler, errorHandler, progressHandler)

getUser("Domenic")
    .then(getBestFriend, ui.error)
    .then(ui.showBestFriend, ui.error);
          </code></pre>
        </section>
      </section>

      <section>
        <section>
          <h1>node.js basics</h1>
        </section>
        <section>
          <h2>What is node.js?</h2>
          <ul>
            <li>Powered by Google's v8 JavaScript runtime engine</li>
            <li>Event driven</li>
            <li>Non-blocking, asynchronous standard libraries</li>
            <li>Provides a package manager and module system for JS/native extensions</li>
          </ul>
        </section>
        <section>
          <h2>Interactive Mode</h2>
          <ul>
            <li>Great for quick tests</li>
            <li>[Demo - node console]</li>
          </ul>
        </section>
        <section>
          <h2>Standard libraries</h2>
          <ul>
            <li>Async by default</li>
            <li>Low level</li>
            <li>HTTP is first class citizen</li>
          </ul>
        </section>
        <section>
          <h2>Hello World</h2>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
var http = require('http');

var server = http.createServer(function (request, response) {
  response.writeHead(200, {"Content-Type": "text/html"});

  response.end("&lt;h1&gt; Hello World &lt;/h1&gt;");
});

server.listen(8000);

console.log("Server running at http://127.0.0.1:8000/");
          </code></pre>
        </section>
        <section>
          <h2>Developing and Debugging</h2>
          <ul>
            <li>Lots of different choices</li>
            <li>taskrunners (nodemon | grunt | gulp)</li>
            <li>step-through debugging (node-inspector | webstorm) </li>
          </ul>
        </section>
        <section>
          <h2>CommonJS Modules</h2>
          <ul>
            <li>Prevents pollution of the global scope</li>
            <li>grabs all modules all at once. within an app, each module is like a singleton.</li>
            <li>[Demo - logger module]</li>
          </ul>
        </section>
        <section>
          <p>app.js</p>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
var logger = require('./logger');

logger.info("info");
logger.dir({ prop1: 1, prop2: 2 });
logger.bad("error");
          </code></pre>
          <p>logger.js</p>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
// or exports = ...
module.exports = {
    info: function (data) {
        console.log(data);
    },
    dir: function (data) {
        cosole.dir(data);
    },
    bad: function (data) {
        console.err(data);
    }
};
          </code></pre>
        </section>
        <section>
          <h2><a href="www.npmjs.org" target="_blank">npm</a></h2>
          <ul>
            <li>node's package manager</li>
            <li>handles and resolves dependencies</li>
            <li>100,000 modules available today (easy to publish)</li>
            <li>[Demo - npm init]</li>
          </ul>
        </section>
        <section>
          <h3><a href="www.npmjs.org/doc/files/package.json.html" target="_blank">package.json</a></h1>
          <pre><code class="json" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
{
  "name": "dream",
  "version": "0.0.1",
  "main": "server/app.js",
  "dependencies": {
    "async": "^0.9.0",
    "cookie-parser": "~1.0.1",
    "express": "~4.0.0",
    "express-jwt": "^0.1.3",
    "express-session": "^1.0.4",
    "ldapjs": "~0.7.1",
    "lodash": "~2.4.1",
    "mssql": "^1.2.0",
    "socket.io": "^1.0.6",
  },
  "devDependencies": {
    "grunt": "~0.4.4",
    "grunt-karma": "~0.8.2",
    "jshint-stylish": "~0.1.5",
    "connect-livereload": "~0.4.0",
    "karma": "~0.12.9",
    "supertest": "~0.11.0",
    "should": "~3.3.1"
  },
  "engines": {
    "node": ">=0.10.0"
  },
  "scripts": {
    "start": "node server/app.js",
    "test": "grunt test",
  }
}
          </code></pre>
        </section>
      </section>

      <section>
        <section>
          <h1>express</h1>
        </section>
        <section>
          <h2>Express at a high level</h2>
          <ul>
            <li>De facto standard framework of node web apps</li>
            <li>Minimalistic, unopinionated</li>
            <li>Supports a variety of middleware</li>
          </ul>
        </section>
        <section>
          <h3>Hello World</h3>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
var express = require('express');

var app = express();

app.get('/', function(request, response) {
    response.send('hello world from express!');
});

app.listen(8000);

console.log("Server running at http://127.0.0.1:8000/");
          </code></pre>
          <p>response sending text/html</p>
        </section>
        <section>
          <h3>JSON</h3>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
var express = require('express');

var app = express();

app.get('/', function(request, response) {
    response.send({ 
        foo: 'bar' 
    });
});

app.listen(8000);

console.log("Server running at http://127.0.0.1:8000/");
          </code></pre>
          <p>response sending json</p>
        </section>
        <section>
          <h2>Routes</h2>
          <ul>
            <li>Respond to HTTP requests with a callback</li>
            <li>Easy to serve JSON</li>
          </ul>
        </section>
        <section>
          <h3>Basic Routing</h3>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
// app.js
var express = require('express');
var app = express();
require('./routes')(app);

// routes.js
module.exports = function(app) {
  
    app.use('/api/things', require('./api/thing'));
    
    // All undefined asset or api routes should return a 404
    app.route('/badlink').get(require('./components/errors'));

    // All other routes should redirect to the index.html
    app.route('/').get(function(req, res) {
        res.sendfile(app.get('appPath') + '/index.html');
    });
};
          </code></pre>
        </section>
        <section>
          <h2>Middleware</h2>
          <ul>
            <li>Some useful built in middleware</li>
            <li>Useful for preprocessing requests</li>
            <li>Authentication/Authorization</li>
          </ul>
        </section>
        <section>
          <h3>mounting middleware everywhere</h3>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
var app = express();

// a middleware with no mount path; gets executed for every request to the app
function logRequests (req, res, next) {
  console.log('Time:', Date.now());
  next();
};

app.use(logRequests);
          </code></pre>
        </section>
        <section>
          <h3>mounting middleware to paths</h3>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
var app = express();

// a middleware with no mount path; gets executed for every request to the app
function logRequests (req, res, next) {
  console.log('Time:', Date.now());
  next();
};

app.get('/user', logRequests, function (req, res, next) {
  res.send('USER');
});
          </code></pre>
        </section>
        <section>
          <h3>Authentication/authorization</h3>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
var basicAuth = require('basic-auth');

var auth = function (req, res, next) {

  function unauthorized(res) {
    res.set('WWW-Authenticate', 'Basic realm=Authorization Required');
    return res.send(401);
  };

  var user = basicAuth(req);

  if (!user || !user.name || !user.pass) {
    return unauthorized(res);
  };

  if (user.name === 'foo' && user.pass === 'bar') {
    return next();
  } else {
    return unauthorized(res);
  };
};
          </code></pre>
        </section>
        <section>
          <h3>Mounting</h3>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
// mounted everywhere
app.use(auth);

// mounted specifically
app.get('/api/magic' basicAuth('username','password'), handler);
          </code></pre>
        </section>
      </section>

      <section>
        <section>
          <h1>Socket.IO</h1>
        </section>
        <section>
            <h2>Socket.io at a high level</h2>
            <ul>
                <li>Thin wrapper around <a href="http://www.html5rocks.com/en/tutorials/websockets/basics/" target="_blank">WebSockets</a></li>
                <li>Works in tandem with an HTTP Server</li>
                <li>Documentation: less than awesome, <a href="https://github.com/learnboost/socket.io/wiki" target="_blank">wiki is better</a> than site</li>
            </ul>
        </section>
        <section>
          <h2>Key Features</h2>
          <ul>
            <li>Client/Server Push</li>
            <li>Broadcast</li>
            <li>Client "session" information</li>
            <li>Message namespaces</li>
            <li>Plain ol' WebSockets API as well</li>
          </ul>
        </section>
        <section>
          <h2>[demo - ngrok socket.io]</h2>
        </section>
        <section>
          <p>Front End</p>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
var socket = io.connect();

socket.on('chat', function (data) {
    var msg = data.nick+': ' + data.message;
    $('textarea').val( $('textarea').val() + msg + '\n' );
});

// Handle UI
$(function() {
    // Set nickname
    $('#nick').on('click', function() {
        socket.emit( 'nick', $('#nickText').val() );
    });

    // Send chat message
    $('#chat').on('click', function() {
        socket.emit('chat', {
            message:$('#chatText').val()
        });
    });
});
          </code></pre>
        </section>
        <section>
          <p>Server Side</p>
          <pre><code class="javascript" data-trim contenteditable style="font-size: 18px; max-height: 500px;">
io.sockets.on('connection', function (socket) {
    
    // Set the nickname property for a given client
    socket.on('nick', function(nick) {
        socket.set('nickname', nick);
    });

    // Relay chat data to all clients
    socket.on('chat', function(data) {
        socket.get('nickname', function(err, nick) {
            var nickname = err ? 'Anonymous' : nick;

            var payload = {
                message: data.message,
                nick: nickname
            };

            io.sockets.emit('chat', payload)
        });
    });
});
          </code></pre>
        </section>
      </section>

      <!-- <section>
        <section>
          <h1>Sharing Code and Culture with Browserify</h1>
        </section>
        <section>
          <h2>What is Browserify?</h2>
          <ul>
            <li>CommonJS</li>
            <li>node-style require in the browser!</li>
            <li>self-contained node module environment</li>
            <li>use local, core, or npm-installed modules</li>
          </ul>
        </section>
        <section>
          <h2>Why would I want to use Browserify?</h2>
          <ul>
            <li>Helps you write modular code on the client</li>
            <li>share client and server code</li>
            <li>Have the same code style, package management, and module system as server! Why have two different paradigms?</li>
          </ul>
        </section>
        <section>
          <h2>Fun Browserify Features</h2>
          <ul>
            <li>Provides browser shims for lots of node core</li>
            <li>can provide modules with alternate entry points when used by browserify</li>
            <li>Source Maps</li>
          </ul>
        </section>
      </section> -->

      <section>
        <h2>More Exercises and Reinforcement</h2>
        <ul>
          <li><a href="http://nodeschool.io/" target="_blank">nodeschool.io</a>
          </li>
          <li>Learn You Node for Much Win!</li>
          <li>Streams Adventure</li>
        </ul>
      </section>

      <section>
        <h1>THE END</h1>
      </section>

      <section>
        <h2>Questions?</h2>
        <p>bdiuguid.github.io/sub-pages/node-intro</p>
        <p>bendiuguid@gmail.com | <a href="http://twitter.com/bdiuguid" target="_blank">@bdiuguid</a></p>
      </section>

    </div>

  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.min.js"></script>

  <script>
    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
    	controls: true,
    	progress: true,
    	history: true,
    	center: true,

    	theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
    	transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

    	// Parallax scrolling
    	// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
    	// parallaxBackgroundSize: '2100px 900px',

    	// Optional libraries used to extend on reveal.js
    	dependencies: [{
    		src: 'lib/js/classList.js',
    		condition: function() {
    			return !document.body.classList;
    		}
    	}, {
    		src: 'plugin/highlight/highlight.js',
    		async: true,
    		callback: function() {
    			hljs.initHighlightingOnLoad();
    		}
    	}, {
    		src: 'plugin/zoom-js/zoom.js',
    		async: true,
    		condition: function() {
    			return !!document.body.classList;
    		}
    	}, {
    		src: 'plugin/notes/notes.js',
    		async: true,
    		condition: function() {
    			return !!document.body.classList;
    		}
    	}]
    });
  </script>

</body>

</html>
